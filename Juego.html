<html>
    <head>
        <script src="query/jquery-1.11.3.min.js"></script>
        <script src="query/jquery-ui.js"></script>
		<script src="query/canvas.js"></script>
        <script src="loongshadow-master/loongshadow.1.0.0.min.js"></script>
        <link rel="stylesheet" href="bootstrap-3.3.4-dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="jquery.shadow/jquery.shadow.css">
        <link rel="stylesheet" href="query/jquery-ui.css">
        <link rel="stylesheet" href="Estilo.css">

    </head>
    <body><audio id="miaudio">
            <source src="audios/Medal_Of_Honor_European_Assault_Soundtrack_-_Main_Theme_(HQ).mp3" type="audio/mpeg">
        </audio>
        <audio id="miaudio2">
            <source src="audios/call_of_duty_sonido_caja_misteriosa.mp3" type="audio/mpeg">
        </audio>
       <canvas id="canvas"></canvas>
       
        <div class="container-fluid">
            <header class="page-header top shadowe ">
                &nbsp;
            </header>
            
            
            <div class="row">



                <div class="col-xs-3 col-md-3 col-lg-3 ">
                    <div class="progress shadowe mover">
                        <div class="mover progress-bar progress-bar-danger progress-bar-striped active" style="width: 100%;" id="thoper">
                            Vida</div>

                    </div>	

                </div>


                <div class="col-xs-1 col-md-1 col-lg-1">
                    <img   src="Imagenes/ttehopper.jpg"mover class="jug1 img-responsive img-circle shadowe " alt="" width="100px" height="100px">
                </div>
                
                <div class="col-xs-4 col-md-4 col-lg-4">
                    <button class="btn btn-warning shadowe mover" onclick="comenzar()">comenzar</button>
                    <button class="btn btn-success shadowe mover">Terminar turno<span class="glyphicon glyphicon-ok"></span></button>
                    <button class=" reloj btn btn-default shadowe mover">00:00</button>
                    <button class="btn btn-info shadowe mover"> pausa <span class="glyphicon glyphicon-time"></span></button>

                </div>


                <div class="col-xs-1 col-md-1 col-lg-1 right">
                    <img src="Imagenes/nagata.jpg" aling="right"  class="jug1 mover right1 img-responsive img-circle shadowe" alt="" width="100"height="60">
                </div>
                <div class="col-xs-2 col-md-4 col-lg-3 ">
                    <div class="progress shadowe mover">
                        <div class="mover progress-bar progress-bar-danger progress-bar-striped active" id="jugador1" style="width:100%">
                            Vida</div>

                    </div>	

                </div>
            </div>
            <canvas id="animartexto"></canvas>
            <div class="row">

                <div class="col-xs-4 col-md-4 col-lg-4">

                    <div  ><img class=" mover img-rounded" posicion=4 id="barco1" height="" width="60%" src="Imagenes/buque22.png" >
                        <kbd class="">numero de celdas 5</kbd>
                    </div>
                    <div  ><img class="mover" id="barco2" height="" width="60%" src="Imagenes/buque.png" alt="">
                        <kbd class="">numero de celdas 4</kbd>
                    </div>
                    <div  ><img class="mover" id="barco3" height="" width="60%" src="Imagenes/buwue44.png" alt="">
                        <kbd class="">numero de celdas 2</kbd><kbd>X2</kbd>
                    </div>
                    <div  ><img class="mover" id="barco4" height="" width="60%" src="Imagenes/chico.png" alt="">
                        <kbd class="">numero de celdas 1</kbd>
                    </div>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-4">
                
                    <div class=" contenedor">

					</div>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-4">
                    <div id="barco1x"><kbd class="new jugador()">numero de celdas 5</kbd><kbd>X2</kbd><img height="" width="60%" src="Imagenes/buque22.png" alt="">

                    </div>
                    <div id="barco2x">

                        <kbd class="">numero de celdas 4</kbd>
                        <img width="60%" src="Imagenes/buque.png" alt="">

                    </div>
                    <div id="barco3x">
                        <kbd class="">numero de celdas 2</kbd><kbd>X2</kbd>
                        <img width="60%" src="Imagenes/buwue44.png" alt="">

                    </div>
                    <div id="barco4x">
                        <kbd class="">numero de celdas 1</kbd>
                        <img width="60%" src="Imagenes/chico.png" alt="">

                    </div>
                    <div id="barco5x"></div>
                </div>
            </div>	
        </div>
        <script>
            var array1 = [];
			var contadorth=1;
            $(document).ready(function () {
				animartexto();

                $("jug1").hide(0).toggle("explode", 2000);
                $("body").hide().fadeIn(3000);
                $("header").hide(0).toggle("slide", 2000);
                $(".contenedor").hide(0).slideDown(3000);
                var audio = document.getElementById("miaudio");

                //audio.play();

                for (var j = 0; j < 11; j++) {
                    for (var k = 0; k < 6; k++) {
                        $(".contenedor").append("<div class='left' id='x' ></div>");
                        document.getElementById("x").id = "p" + [j + "" + k];
                        var temporal = document.getElementById("p" + [j + "" + k]);
                        temporal.siguiente = document.getElementById("p" + [j + "" + k+1]);
                        temporal.estaclick = false;
                        temporal.estado = false;
                        temporal.estaatacado = false;
                        $(temporal).css("background-image", "url('Imagenes/Baldosa.png')");

                    }
                }

                for (var j = 0; j < 11; j++) {
                    for (var k = 0; k < 6; k++) {
                        $(".contenedor").append("<div class='left' id='x'></div>");
                        document.getElementById("x").id = ["d" + j + "" + k];
                        var temporal = document.getElementById("d" + [j + "" + k]);
                        temporal.estaclick = false;
                        temporal.estaatacado = false;
                        temporal.isaccesible = false;
                        temporal.siguiente = document.getElementById("d" + [j + "" + k + 1]);
                        $(temporal).css("background-image", "url('Imagenes/Baldosa.png')");
                    }
                }


            });
			
            var barcos = function (id, posicion, estado, posicionado) {
                this.id = document.getElementById(id);
                this.id.estado = estado
                this.id.posicionado = posicionado;
                this.id.posicion = posicion;
            }

            var jugador = function (nombre, barcos, vida) {
                this.nombre = nombre;
                this.barcos = barcos;
                this.vida = vida;
                this.primerturno = false;
				this.turno=false;
                this.comenzar = function () {

                }

            }
            var barco1 = new barcos('barco1', 1, false, false);
            var barco2 = new barcos('barco2', 2, false, false);
            var barco3 = new barcos('barco3', 2, false, false);
            var barco4 = new barcos('barco4', 5, false, false);
			var barco1x= new barcos('barco1x', 1, false, false);
			var barco2x= new barcos('barco2x', 2, false, false);
			var barco3x = new barcos('barco3x', 2, false, false);
			var barco4x = new barcos('barco4x', 5, false, false);
			var barcostotalx=[barco1x, barco2x, barco3x, barco4x];
            var barcostotal = [barco1, barco2, barco3, barco4];
			var cnagata=new jugador("Capitannagata",barcostotalx,"100%");
            var thopper = new jugador("tenienteHopper", barcostotal, "100%");
			comenzaranimacion();
			thopper.primerturno=true;
			
		function comenzar() {

                var global;
                var temporal;
				 if (thopper.primerturno==true) {

                    for (var i = 0; i < thopper.barcos.length; i++) {

                        if (thopper.barcos[i].id.posicionado == false) {
                            $(thopper.barcos[i].id).bind("click", function () {


                                for (var i = 0; i < thopper.barcos.length; i++) {
                                    if (this != thopper.barcos[i].id) {
                                        $(thopper.barcos[i].id).unbind("click");

                                    }
                                    else {
                                        global = thopper.barcos[i].id;
										
                                    }
                                }
                                for (var j = 0; j < 11; j++) {
                                    for (var k = 0; k < 6; k++) {
                                        var baldosa = document.getElementById("p" + [j + "" + k]);
                                        if (baldosa.estaclick == false) {
                                            $(baldosa).bind("mouseover", function () {
                                                temporal = this;

                                                for (var i = 0; i < global.posicion; i++) {
                                                    $(temporal).css("background-image", "none");
                                                    $(temporal).css("background-color", "red");
													console.log(temporal.id);
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                }

                                            });

                                            $(baldosa).bind("mouseleave", function () {

                                                temporal = this;

                                                for (var i = 0; i < global.posicion; i++) {
                                                    $(temporal).css("background-image", "url('Imagenes/Baldosa.png')");
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                }
                                            });

                                            $(baldosa).bind("click", function () {
                                                temporal = this;
                                                for (var i = 0; i < global.posicion; i++) {

                                                    $(temporal).css("background-image", "none");
                                                    $(temporal).css("background-color", "red");
                                                    $(temporal).unbind("mouseleave");
                                                    $(temporal).unbind("mouseover");
                                                    $(temporal).unbind("click");
                                                    temporal.estaclick = true;
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                    for (var j = 0; j < 11; j++) {
                                                        for (var k = 0; k < 6; k++) {
                                                            var acu = document.getElementById("p" + [j + "" + k]);
                                                            $(acu).unbind("click").unbind("mouseover").unbind("mouseleave");
                                                        }
                                                    }


                                                    global.posicionado = true;
                                                    $(global).unbind("click");
													var contador=verificar(thopper);
													
													if(contador<4){
														
														comenzar();
													}
													else{
														
														thopper.primerturno=false;
														cnagata.primerturno=true;
													
													}




                                                }

                                            });
                                        }
                                    }
                                }
                            });
                        }
                    }

                }
				else if(cnagata.primerturno==true){
					
					for (var i = 0; i < cnagata.barcos.length; i++) {

                        if (cnagata.barcos[i].id.posicionado == false) {
                            $(cnagata.barcos[i].id).bind("click", function () {


                                for (var i = 0; i < cnagata.barcos.length; i++) {
                                    if (this != cnagata.barcos[i].id) {
                                        $(cnagata.barcos[i].id).unbind("click");

                                    }
                                    else {
                                        global = cnagata.barcos[i].id;
										
                                    }
                                }
                                for (var j = 0; j < 11; j++) {
                                    for (var k = 0; k < 6; k++) {
                                        var baldosa = document.getElementById("d" + [j + "" + k]);
                                        if (baldosa.estaclick == false) {
                                            $(baldosa).bind("mouseover", function () {
                                                temporal = this;

                                                for (var i = 0; i < global.posicion; i++) {
                                                    $(temporal).css("background-image", "none");
                                                    $(temporal).css("background-color", "red");
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                }

                                            });

                                            $(baldosa).bind("mouseleave", function () {

                                                temporal = this;

                                                for (var i = 0; i < global.posicion; i++) {
                                                    $(temporal).css("background-image", "url('Imagenes/Baldosa.png')");
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                }
                                            });

                                            $(baldosa).bind("click", function () {
                                                temporal = this;
                                                for (var i = 0; i < global.posicion; i++) {

                                                    $(temporal).css("background-image", "none");
                                                    $(temporal).css("background-color", "red");
                                                    $(temporal).unbind("mouseleave");
                                                    $(temporal).unbind("mouseover");
                                                    $(temporal).unbind("click");
                                                    temporal.estaclick = true;
                                                    if (temporal.siguiente != null) {
                                                        temporal = temporal.siguiente;
                                                    }
                                                    for (var j = 0; j < 11; j++) {
                                                        for (var k = 0; k < 6; k++) {
                                                            var acu = document.getElementById("d" + [j + "" + k]);
                                                            $(acu).unbind("click").unbind("mouseover").unbind("mouseleave");
                                                        }
                                                    }


                                                    global.posicionado = true;
                                                    $(global).unbind("click");
													var contador=verificar(cnagata);
													
													if(contador<4){
														
														comenzar();
													}
													else{
														
														thopper.turno=true;
														cnagata.primerturno=false;
														
													}




                                                }

                                            });
                                        }
                                    }
                                }
                            });
                        }
                    }
					
				}
			else if(thopper.turno=true){
				for (var j = 0; j < 11; j++) {
					for (var k = 0; k < 6; k++) {
						var baldosa = document.getElementById("d" + [j + "" + k]);
						$(baldosa).bind("mouseover",function(){
							$(this).hide(0).toggle("highlight",100);
						});
						$(baldosa).bind("click",function(){
							
							if(this.estaclick==true){
								alert("hola");
								$("#jugador1").attr("style","width:20%");
							}
							
						});
					}
				}
				
			}

            }
			
			function verificar(jugador){
				var contador=0;
				var contador2=0
				for(var i=0;i<jugador.barcos.length;i++){
					if(jugador.barcos[i].id.posicionado==true){
						contador++;
					}
					if(contador==5){
						return contador;
					}
					
				}
			return contador;}







        </script>
    </body>
</html>